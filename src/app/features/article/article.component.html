<div class="article-page" *ngIf="article">
  <div class="banner">
    <div class="container">
      <h1>{{ article.title }}</h1>

      <mat-card>
        <mat-card-header>
          <!-- <img mat-card-avatar [src]="article.author.image" (click)="navigateToLink('/')" class="clickable-image" /> -->

          <!-- <mat-card-title> -->
          <!-- {{ article.author.username }} -->
          <!-- </mat-card-title> -->
          <mat-card-subtitle>
            {{ article.createdAt | date : "longDate" }}
          </mat-card-subtitle>

          <div class="side-action" *ngIf="canModify">
            <!--  -->
              <a class="icon-link" [routerLink]="['/editor', article.slug]">
                <mat-icon class="icon" fontIcon="edit"></mat-icon>
                <span>Edit Article</span>
              </a>

              <button class="icon-link" [ngClass]="{ disabled: isDeleting }" (click)="deleteArticle()">
                <mat-icon class="icon" fontIcon="edit"></mat-icon>
                Delete
              </button>
          </div>

        </mat-card-header>
        <mat-card-content>
          <div [innerHTML]="article.body | markdown | async"></div>
        </mat-card-content>
      </mat-card>

      <div *appShowAuthed="true">
        <form class="card comment-form" (ngSubmit)="addComment()">
          <fieldset [disabled]="isSubmitting">
            <div class="card-block">
              <textarea class="form-control" placeholder="Write a comment..." rows="3"
                [formControl]="commentControl"></textarea>
            </div>
            <div class="card-footer">
              <img [src]="currentUser?.image === null ? '' : currentUser?.image" class="comment-author-img" />
              <button class="btn btn-sm btn-primary" type="submit">
                Post Comment
              </button>
            </div>
          </fieldset>
        </form>
      </div>

      <app-article-comment *ngFor="let comment of comments; trackBy: trackById" [comment]="comment"
        (delete)="deleteComment(comment)">
      </app-article-comment>

    </div>
  </div>
</div>
